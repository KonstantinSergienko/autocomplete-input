{"version":3,"sources":["images/search.png","components/TextInput.js","App.js","components/TextInputModel.js","index.js","store.js"],"names":["module","exports","TextInput","observer","handlerChange","event","props","onChange","requestCities","value","target","preventDefault","this","placeholder","autocomplete","addCity","className","type","src","searchPic","alt","style","length","display","map","item","index","key","onClick","name","React","Component","App","inject","renderCities","store","cities","removeCity","city","inputCity","autocompleteArray","getCitiesFromFias","TextInputModel","action","observable","query","a","clear","fetch","request","json","then","resp","result","shift","catch","err","console","error","getCitiesFromSession","sessionStorage","getItem","split","filter","cityIndex","setItem","push","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7939febd.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRsLOTFd9s67AAABMElEQVQ4y8XTv0pjURCA8Z8Wib3mrgnGd1DiW7ja+yAq+AJBfA1xt9tqF7aLQrCw0kIQEm2ijdgmUS5joeKNuR7snFOdj/lmmPOH91i268StsYFjO5oSMefASEysoX3V8vTMqZA7tK6uou6nI7nQVSurfir0rHzgq/pCd7rLgdArqyTTF9qTcNlIPlX9LVpyQ0tFtCscJo7jl7BdBCfCekLYEDpFcCcsJoSGMCiCsVBJCFVh/L6ddY/5hLCAh6LQQyshtHBVFP5iKyFs4X8RNA3lVj9JX5MbqU/CfaEvK0n/4Wb6pqnqCv2pSdZcC09lz7ymK+SObGioaNj0Wy48CRdl3avahh/+w0hb08VnCku2dQw8utOx9zpqllLKo+ZcuEw+oG9RXmY5m/m6IfPPn2frZ3hOQEcKcAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNS0yN1QxMTo1Nzo0OSswMDowMNkTRxsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDUtMjdUMTE6NTc6NDkrMDA6MDCoTv+nAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport searchPic from \"../images/search.png\";\r\n\r\nimport \"./textInput.scss\";\r\n\r\n@observer\r\nclass TextInput extends React.Component {\r\n    handlerChange = event => {\r\n        const { onChange, requestCities} = this.props;\r\n        const { value } = event.target;\r\n\r\n        event.preventDefault();\r\n\r\n        onChange(value);\r\n        requestCities(value);\r\n    }\r\n\r\n    render() {\r\n        const { value, placeholder, autocomplete, addCity } = this.props;\r\n\r\n        return(\r\n            <div className=\"text-input-wrapper\">\r\n                <input \r\n                    type=\"text\"\r\n                    className=\"text-input\"\r\n                    value={value}\r\n                    placeholder={placeholder}\r\n                    onChange={event => this.handlerChange(event)}\r\n                />\r\n\r\n                <img src={searchPic} className=\"search-picture\" alt=\"search\" />\r\n\r\n                <datalist \r\n                    className=\"autocomplete\"\r\n                    style={autocomplete.length !== 0 ? {display : \"block\"} : {display: \"none\"}}\r\n                >\r\n                    {autocomplete.map((item, index) => {\r\n                        return (\r\n                            <option \r\n                                key={index}\r\n                                className=\"option\"\r\n                                onClick={() => addCity(item.name)}\r\n                            >\r\n                                {item.name}\r\n                            </option>)\r\n                    })}\r\n                </datalist>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TextInput;","import React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\n\r\nimport TextInput from \"./components/TextInput\";\r\n\r\nimport \"./reset.css\";\r\nimport \"./index.scss\";\r\nimport \"./App.scss\";\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass App extends React.Component {\r\n    renderCities = () => {\r\n        const { cities, removeCity } = this.props.store;\r\n\r\n        return cities.map(( city, index ) => {\r\n        return (\r\n            <li className=\"list-item\">\r\n                <p>{city}</p>\r\n                <div className=\"line\"></div>\r\n                <button \r\n                    onClick={() => removeCity(index)}\r\n                    className=\"delete-cross\"\r\n                >\r\n                </button>\r\n            </li>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { cities, inputCity, autocompleteArray, addCity, getCitiesFromFias } = this.props.store;        \r\n\r\n        return(\r\n            <div className=\"app\">\r\n                <div className=\"search-block\">\r\n                    <TextInput\r\n                        {...inputCity}\r\n                        requestCities={getCitiesFromFias}\r\n                        autocomplete={autocompleteArray}\r\n                        addCity={addCity}\r\n                        placeholder={\"Введите название города\"}\r\n                    />\r\n\r\n                    <button onClick={() => addCity(inputCity.value)} className=\"add-button\">\r\n                        Добавить\r\n                    </button>\r\n                </div>\r\n                <ul className=\"cities-list\">\r\n                    {cities.length !== 0 ? \r\n                        this.renderCities() : \r\n                        <li className=\"list-item\">Список пуст...</li>\r\n                    }\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;","import { observable, action } from \"mobx\";\r\n\r\nclass TextInputModel {\r\n    @observable value;\r\n\r\n    constructor(value) {\r\n        this.value = value || \"\";\r\n        this.onChange = action(this.onChange);\r\n    }\r\n\r\n    onChange = value => {\r\n        this.value = value;\r\n    }\r\n}\r\n\r\nexport default TextInputModel;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"mobx-react\";\r\n\r\nimport App from \"./App\";\r\nimport Store from \"./store\";\r\n\r\nconst store = new Store();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById(\"root\")\r\n);","import { observable, action } from \"mobx\";\r\n\r\nimport TextInput from \"./components/TextInputModel\";\r\n\r\nclass Store {\r\n    @observable cities;\r\n    @observable inputCity;\r\n    @observable autocompleteArray;\r\n\r\n    constructor() {\r\n        this.cities = this.getCitiesFromSession() || [];\r\n        this.inputCity = new TextInput();\r\n        this.autocompleteArray = [];\r\n        this.removeCity = action(this.removeCity);\r\n        this.addCity = action(this.addCity);\r\n        this.getCitiesFromFias = action(this.getCitiesFromFias);\r\n    }\r\n\r\n    @action\r\n    clear = () => {\r\n        this.autocompleteArray = [];\r\n    }\r\n\r\n    getCitiesFromFias = async query => {\r\n        if (query.length < 3) {\r\n            this.clear();\r\n            return;\r\n        }\r\n\r\n        const request = await fetch(`https://kladr-api.ru/api.php?query=${query}&contentType=city&typeCode=1&limit=5`);\r\n        const response = request.json();\r\n\r\n        response\r\n            .then(resp => {\r\n                resp.result.shift();\r\n                this.autocompleteArray = resp.result;\r\n            })\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n\r\n\r\n    getCitiesFromSession = () => {\r\n        const cities = sessionStorage.getItem(\"cities\");\r\n        \r\n        if (!cities) {\r\n            return;\r\n        }\r\n\r\n        return cities.split(\",\");\r\n    }\r\n\r\n\r\n\r\n    removeCity = index => {\r\n        this.cities = this.cities.filter((city, cityIndex) => cityIndex !== index);\r\n        \r\n        sessionStorage.setItem(\"cities\", this.cities);\r\n    }\r\n\r\n\r\n\r\n    addCity = name => {\r\n        if (!name) {\r\n            return;\r\n        }\r\n\r\n        this.cities.push(name);\r\n        this.inputCity.onChange(\"\");\r\n        this.clear();\r\n\r\n        sessionStorage.setItem(\"cities\", this.cities);\r\n    }\r\n}\r\n\r\nexport default Store;"],"sourceRoot":""}